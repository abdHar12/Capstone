<div
  id="make-order-div"
  class="mx-auto p-3 mt-1 d-flex flex-column justify-content-center base-border"
>
  <ng-container *ngIf="products.length > 0; else noProducts">
    <h2 class="mb-3 mt-2">Put the informations:</h2>
    <form class="w-100" [formGroup]="orderForm" (ngSubmit)="onMakeTheOrder()">
      <div class="mb-5">
        <label for="inputFirstName" class="form-label">Name: </label>
        <input
          type="text"
          name="firstName"
          class="form-control base-border rounded-0"
          id="inputFirstName"
          formControlName="firstName"
        />
      </div>
      <div class="mb-5">
        <label for="inputSurname" class="form-label">Last name:</label>
        <input
          type="text"
          name="surname"
          class="form-control base-border rounded-0"
          id="inputSurname"
          formControlName="surname"
        />
      </div>
      <div class="mb-5">
        <label for="inputAddress" class="form-label">Address: </label>
        <input
          type="text"
          name="address"
          class="form-control base-border rounded-0"
          id="inputAddress"
          formControlName="address"
        />
      </div>
      <select
        class="custom-select mb-5 base-border"
        (change)="changeTypeOfPayment($event)"
        formControlName="typeOfPayment"
      >
        <option value="">Choose the type of payment</option>
        <option *ngFor="let type of keys()">
          {{ type }}
        </option>
      </select>
      <div id="order-products-table">
        <ng-container *ngFor="let product of products">
          <div class="w-100 d-flex flex-row single-product base-border">
            <img [src]="product.imgManga" />
            <div class="d-flex flex-grow-1 justify-content-between">
              <div class="info-div p-1 manga-name-div">
                <span class="flex-grow-1 my-auto">{{
                  product.titleManga
                }}</span>
              </div>
              <div class="d-flex info-div p-1 flex-grow-1">
                <span class="flex-grow-1">
                  {{
                    product.chapterNumber === "Unique Chapter"
                      ? "Unique Chapter"
                      : "Chapter: " + product.chapterNumber
                  }}</span
                >
              </div>
              <div class="d-flex p-1 info-div flex-grow-1">
                <span class="flex-grow-1">{{ product.price }}€</span>
              </div>
            </div>
            <div>
              <button
                (click)="deleteFromCart(product.UUID)"
                class="w-100 h-100 bg-white text-black border-0 px-3"
              >
                <i class="bi bi-trash3-fill"></i>
              </button>
            </div>
          </div>
        </ng-container>
        <div id="amount-div" class="base-border ms-auto text-center">
          Total Amount: {{ totalAmount }}€
        </div>
      </div>
      <div class="mt-4 mb-4 d-flex justify-content-center">
        <button [disabled]="!orderForm.valid">Send the order</button>
      </div>
    </form>
  </ng-container>
  <ng-template #noProducts>
    <h2 class="mb-3 mt-2">No products in the cart</h2>
  </ng-template>
</div>
