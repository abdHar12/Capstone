<ng-container *ngIf="!lastChapter; else isLastChapter">
  <div
    class="not-last-chapter card base-border border-white bg-black text-white"
  >
    <div class="d-flex">
      <img
        [src]="urlImg"
        class="i card-img-top w-50 img-borders rounded-0 mx-auto"
      />
    </div>
    <div class="card-body p-1 d-flex justify-content-between flex-column">
      <div class="p-1" style="height: 100px">
        <ng-container
          *ngIf="
            chapter.attributes.title !== undefined &&
              chapter.attributes.title !== '';
            else noTitle
          "
        >
          <h5 class="card-title">
            {{ chapter.attributes.title }}
          </h5>
        </ng-container>
        <ng-template #noTitle>
          <h5 class="card-title">
            {{ mangaTitle }}
          </h5>
        </ng-template>
        <ng-container
          *ngIf="chapter.attributes.chapter !== undefined; else uniqueChapter"
        >
          <p class="card-text">Chapter n°: {{ chapter.attributes.chapter }}</p>
        </ng-container>
        <ng-template #uniqueChapter>
          <p class="card-text">Unique Chapter</p>
        </ng-template>
      </div>
      <div>
        <div class="d-flex justify-content-end mb-2 pe-3">
          <span>Price: {{ price }}€</span>
        </div>
        <a
          [ngClass]="{ 'bought-chapter': alreadyBought }"
          class="buy-btn-not-last-chapter btn w-100 border-4 border-black border-start-0 border-end-0 rounded-0 border-white text-white ms-auto"
          (click)="addToCart()"
          >Buy it</a
        >
      </div>
    </div>
  </div>
</ng-container>
<ng-template #isLastChapter>
  <div class="last-chapter bg-black text-white h-100 p-1 mx-auto">
    <div
      class="base-border border-white d-flex flex-row justify-content-start p-2 position-relative"
    >
      <div class="img-div">
        <img id="i" [src]="urlImg" class="rounded-0" />
      </div>
      <div class="ms-2 flex-grow-1">
        <div>
          <div class="title-div d-flex">
            <ng-container
              *ngIf="
                chapter.attributes.title !== undefined &&
                  chapter.attributes.title !== '';
                else noTitle
              "
            >
              <h5 class="fs-3 fw-bolder w-100">
                {{ chapter.attributes.title }}
              </h5>
            </ng-container>
            <ng-template #noTitle>
              <h5 class="fs-4 fw-bolder">
                {{ mangaTitle }}
              </h5>
            </ng-template>
          </div>
          <div class="mt-4">
            <ng-container
              *ngIf="
                chapter.attributes.chapter !== undefined;
                else uniqueChapter
              "
            >
              <p>Chapter n°: {{ chapter.attributes.chapter }}</p>
            </ng-container>
            <ng-template #uniqueChapter>
              <p>Unique Chapter</p>
            </ng-template>
          </div>

          <div class="d-flex flex-row">
            <div class="d-flex position-absolute bottom-0">
              <span class="mt-auto">Price: {{ price }}€</span>
            </div>
            <button
              [ngClass]="{ 'bought-chapter': alreadyBought }"
              (click)="addToCart()"
              class="btn d-flex bg-black text-white border-2 border-bottom-0 border-end-0 border-white px-5 end-0 rounded-0 ms-auto position-absolute end-0 bottom-0 mb-0"
            >
              Buy it
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
